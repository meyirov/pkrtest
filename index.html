<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PKR - –î–µ–±–∞—Ç—ã</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
    <script>
      const SUPABASE_URL = 'https://dwkbptqrblyiqymnqjiv.supabase.co';
      const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImR3a2JwdHFyYmx5aXF5bW5xaml2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM0MzA3NTcsImV4cCI6MjA1OTAwNjc1N30.QIHms9_kllO7SMxxUlu2U_ugICz1q_cr2-fO61092N4';
    </script>
</head>
<body>
    <div id="registration-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h2>
            <p>–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏:</p>
            <input id="reg-fullname" type="text" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
            <button id="submit-profile-reg-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
        </div>
    </div>

    <div id="app-container" class="container" style="display: none;">
        <div class="main-content">
            <section id="feed" class="content active">
                <div id="new-post">
                    <textarea id="post-text" placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"></textarea>
                    <div class="new-post-actions">
                        <div class="new-post-icons">
                            <label for="post-image" class="image-upload-label">
                                <span>üì∑</span> –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
                            </label>
                            <input id="post-image" type="file" accept="image/*" style="display: none;">
                        </div>
                        <button id="submit-post">–¢–≤–∏—Ç–Ω—É—Ç—å</button>
                    </div>
                </div>
                <div id="posts-loading" style="display: none; text-align: center; padding: 10px;">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div id="posts"></div>
            </section>
            
            <section id="tournaments" class="content">
                <button id="create-tournament-btn">–°–æ–∑–¥–∞—Ç—å —Ç—É—Ä–Ω–∏—Ä</button>
                <form id="create-tournament-form" class="form-hidden">
                    <input id="tournament-name" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞" required>
                    <input id="tournament-date" type="text" placeholder="–î–∞—Ç–∞ (–≤ —Ñ–æ—Ä–º–∞—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì)" required>
                    <select id="tournament-city" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</option>
                        <option value="–ê–ª–º–∞—Ç—ã">–ê–ª–º–∞—Ç—ã</option>
                        <option value="–ê—Å—Ç–∞–Ω–∞">–ê—Å—Ç–∞–Ω–∞</option>
                        <option value="–ê“õ—Ç–∞—É">–ê“õ—Ç–∞—É</option>
                        <option value="–î—Ä—É–≥–æ–π">–î—Ä—É–≥–æ–π</option>
                    </select>
                    <select id="tournament-scale" required>
                        <option value="" disabled selected>–í—ã–±–µ—Ä–∏—Ç–µ –º–∞—Å—à—Ç–∞–±</option>
                        <option value="–ì–æ—Ä–æ–¥—Å–∫–æ–π">–ì–æ—Ä–æ–¥—Å–∫–æ–π</option>
                        <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π">–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π</option>
                    </select>
                    <label for="tournament-logo-upload" class="logo-upload-label">
    <span>üñºÔ∏è</span> –ó–∞–≥—Ä—É–∑–∏—Ç—å –ª–æ–≥–æ—Ç–∏–ø
</label>
<span id="logo-file-name" class="file-name-display">–§–∞–π–ª –Ω–µ –≤—ã–±—Ä–∞–Ω</span>
<input id="tournament-logo-upload" type="file" accept="image/*" style="display: none;">
                    <textarea id="tournament-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–∞"></textarea>
                    <input id="tournament-address" type="text" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ 2GIS">
                    <input id="tournament-deadline" type="text" placeholder="–î–µ–¥–ª–∞–π–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, 05.04.2025)">
                    <button id="submit-tournament" type="submit">–°–æ–∑–¥–∞—Ç—å</button>
                </form>

                <div class="tournaments-view-controls">
                    <div class="tournaments-tabs">
                        <button id="active-tournaments-tab" class="view-tab-btn active">–ê–∫—Ç–∏–≤–Ω—ã–µ</button>
                        <button id="archive-tournaments-tab" class="view-tab-btn">–ê—Ä—Ö–∏–≤</button>
                    </div>
                    <div id="tournament-filters">
                        <select id="filter-city">
                            <option value="all">–í—Å–µ –≥–æ—Ä–æ–¥–∞</option>
                            <option value="–ê–ª–º–∞—Ç—ã">–ê–ª–º–∞—Ç—ã</option>
                            <option value="–ê—Å—Ç–∞–Ω–∞">–ê—Å—Ç–∞–Ω–∞</option>
                            <option value="–®—ã–º–∫–µ–Ω—Ç">–®—ã–º–∫–µ–Ω—Ç</option>
                            <option value="–î—Ä—É–≥–æ–π">–î—Ä—É–≥–æ–π</option>
                        </select>
                        <select id="filter-scale">
                            <option value="all">–í—Å–µ –º–∞—Å—à—Ç–∞–±—ã</option>
                            <option value="–ì–æ—Ä–æ–¥—Å–∫–æ–π">–ì–æ—Ä–æ–¥—Å–∫–æ–π</option>
                            <option value="–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π">–†–µ—Å–ø—É–±–ª–∏–∫–∞–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                </div>
                
                <div id="tournament-list"></div>
            </section>
            
            <section id="tournament-details" class="content">
                <div id="tournament-header"></div>
                <div id="tournament-description" class="description-hidden"></div>
                <button id="toggle-description-btn">–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ</button>
                <hr class="section-divider">
                <div id="tournament-future-content">
                    <div id="tournament-nav-tabs" class="tournament-tabs">
                        <button id="posts-tab" class="tab-btn active">–ü–æ—Å—Ç—ã</button>
                        </div>
                    
                    <div id="tournament-posts" class="tab-content active"></div>
                    
                    <div id="tournament-registration" class="tab-content">
                        <button id="register-tournament-btn">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è</button>
                        <form id="registration-form" class="form-hidden">
                            <input id="reg-faction-name" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –§—Ä–∞–∫—Ü–∏–∏" required>
                            <input id="reg-username1" type="text" placeholder="Username 1-–≥–æ —Å–ø–∏–∫–µ—Ä–∞ (–±–µ–∑ @)" required>
                            <input id="reg-username2" type="text" placeholder="Username 2-–≥–æ —Å–ø–∏–∫–µ—Ä–∞ (–±–µ–∑ @)" required>
                            <input id="reg-club" type="text" placeholder="–ö–ª—É–±" required>
                            <input id="reg-city" type="text" placeholder="–ì–æ—Ä–æ–¥">
                            <input id="reg-contacts" type="text" placeholder="–ö–æ–Ω—Ç–∞–∫—Ç—ã">
                            <textarea id="reg-extra" placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è)"></textarea>
                            <button id="submit-registration-btn" type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </form>
                        <div id="registration-list"></div>
                    </div>

                    <div id="tournament-tab-management" class="tab-content">
                        <div class="tab-stats" id="tab-stats"></div>
                        <button id="publish-tab-btn" class="publish-btn"></button>
                        <h3>–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤</h3>
                        <div id="tab-main-list"></div>
                        <hr class="section-divider">
                        <h3>–†–µ–∑–µ—Ä–≤</h3>
                        <div id="tab-reserve-list"></div>
                    </div>
                    
                    <div id="tournament-participants" class="tab-content">
                        <h3>–û—Å–Ω–æ–≤–Ω–æ–π —Å–æ—Å—Ç–∞–≤</h3>
                        <div id="participants-main-list"></div>
                        <hr class="section-divider">
                        <h3>–†–µ–∑–µ—Ä–≤</h3>
                        <div id="participants-reserve-list"></div>
                    </div>

                    <section id="tournament-bracket" class="tab-content">
                        <div class="bracket-sub-nav">
                            <button id="qualifying-bracket-tab" class="bracket-sub-nav-btn active">–û—Ç–±–æ—Ä–æ—á–Ω—ã–µ</button>
                            <button id="playoff-bracket-tab" class="bracket-sub-nav-btn">Play Off</button>
                        </div>
        
                        <div id="bracket-qualifying-content" class="bracket-content-pane active">
                            <div id="bracket-form">
                                <h4>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ç–∫–æ–π –æ—Ç–±–æ—Ä–æ—á–Ω—ã—Ö —Ä–∞—É–Ω–¥–æ–≤</h4>
                                <select id="bracket-format">
                                  <option value="–ê–ü–§">–ê–ü–§</option>
                                  <option value="–ë–ü–§">–ë–ü–§</option>
                                </select>
                                <input id="bracket-faction-count" type="number" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ—Ä–∞–∫—Ü–∏–π" required>
                                <input id="bracket-round-count" type="number" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—É–Ω–¥–æ–≤" required>
                                <button id="generate-bracket-btn">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å 1-–π —Ä–∞—É–Ω–¥</button>
                            </div>
                            <div id="bracket-display"></div>
                        </div>
        
                        <div id="bracket-playoff-content" class="bracket-content-pane">
                            <form id="playoff-setup-form" class="form-hidden"></form>
                            <div id="playoff-display"></div>
                        </div>
                    </section>
                </div>
            </section>
            <section id="rating" class="content">
                <div id="rating-city-view">
                    <div class="rating-header">
                        <h2>–í—ã–±–µ—Ä–∏—Ç–µ –≥–æ—Ä–æ–¥</h2>
                    </div>
                    <div id="rating-city-list"></div>
                </div>

                <div id="rating-season-view" class="selector-hidden">
                    <div class="rating-header">
                        <button id="rating-back-to-cities" class="rating-back-btn">‚Üê</button>
                        <h2 id="rating-season-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å–µ–∑–æ–Ω</h2>
                    </div>
                    <div id="rating-season-list"></div>
                </div>

                <div id="rating-table-view" class="selector-hidden">
                    <div class="rating-header">
                        <button id="rating-back-to-seasons" class="rating-back-btn">‚Üê</button>
                        <h2 id="rating-table-title">–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</h2>
                    </div>
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>–ú–µ—Å—Ç–æ</th>
                                    <th>–ò–º—è</th>
                                    <th>–û—á–∫–∏</th>
                                    <th>–ö–ª—É–±</th>
                                </tr>
                            </thead>
                            <tbody id="rating-list-tbody"></tbody>
                        </table>
                    </div>
                </div>
            </section>
            <section id="profile" class="content">
                <h2>–ü—Ä–æ—Ñ–∏–ª—å</h2>
                <p>Username: <span id="username"></span></p>
                <input id="fullname" type="text" placeholder="–ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è">
                <button id="update-profile">–ò–∑–º–µ–Ω–∏—Ç—å –∏–º—è</button>
            </section>
            <section id="edu" class="content">
                <h2>PKR EDU</h2>
                <p>–û–±—É—á–∞—é—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è!</p>
            </section>
        </div>
        <nav class="navbar">
            <button id="feed-btn" class="nav-btn active"><span>üè†</span> –õ–µ–Ω—Ç–∞</button>
            <button id="tournaments-btn" class="nav-btn"><span>üèÜ</span> –¢—É—Ä–Ω–∏—Ä—ã</button>
            <button id="rating-btn" class="nav-btn"><span>‚≠ê</span> –†–µ–π—Ç–∏–Ω–≥</button>
            <button id="profile-btn" class="nav-btn"><span>üë§</span> –ü—Ä–æ—Ñ–∏–ª—å</button>
            <button id="edu-btn" class="nav-btn"><span>üìö</span> EDU</button>
        </nav>
    </div>

    <div id="results-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <h3 id="results-modal-title">–í–≤–æ–¥ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–∞—Ç—á–∞</h3>
            <div id="results-modal-body">
                </div>
            <div class="modal-actions">
                <button id="save-results-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button id="cancel-results-btn">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
